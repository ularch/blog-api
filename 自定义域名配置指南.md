# ğŸŒ è‡ªå®šä¹‰åŸŸåé…ç½®æŒ‡å—

## ğŸ“‹ é…ç½® huaman-lou.top åŸŸå

### å‰ç½®è¦æ±‚
- âœ… æ‹¥æœ‰åŸŸå `huaman-lou.top`
- âœ… åŸŸå DNS ç®¡ç†æƒé™
- âœ… Cloudflare Workers å·²éƒ¨ç½²

### æ­¥éª¤ 1ï¼šæ·»åŠ åŸŸååˆ° Cloudflare

#### é€‰é¡¹ Aï¼šä½¿ç”¨ Cloudflare DNSï¼ˆæ¨èï¼‰
1. ç™»å½• [Cloudflare Dashboard](https://dash.cloudflare.com)
2. ç‚¹å‡» "æ·»åŠ ç«™ç‚¹"
3. è¾“å…¥åŸŸåï¼š`huaman-lou.top`
4. é€‰æ‹©å…è´¹è®¡åˆ’
5. å¤åˆ¶ Cloudflare æä¾›çš„ NS è®°å½•
6. åˆ°åŸŸåæ³¨å†Œå•†å¤„ä¿®æ”¹ NS è®°å½•ä¸º Cloudflare çš„ NS

#### é€‰é¡¹ Bï¼šä»…ä½¿ç”¨ Worker è·¯ç”±ï¼ˆä¸è¿ç§» DNSï¼‰
1. åœ¨åŸŸå DNS ä¸­æ·»åŠ  CNAME è®°å½•
2. æŒ‡å‘ Worker çš„é»˜è®¤åŸŸå

### æ­¥éª¤ 2ï¼šé…ç½® Worker è·¯ç”±

#### æ–¹æ³• 1ï¼šé€šè¿‡ Dashboardï¼ˆå›¾å½¢ç•Œé¢ï¼‰
1. è®¿é—® [Cloudflare Workers Dashboard](https://dash.cloudflare.com/workers)
2. é€‰æ‹©ä½ çš„ Workerï¼š`simple-blog-api`
3. ç‚¹å‡» "è§¦å‘å™¨" æ ‡ç­¾
4. ç‚¹å‡» "æ·»åŠ è‡ªå®šä¹‰åŸŸ"
5. è¾“å…¥ï¼š`huaman-lou.top` æˆ– `api.huaman-lou.top`
6. ç‚¹å‡» "æ·»åŠ åŸŸå"

#### æ–¹æ³• 2ï¼šé€šè¿‡ wrangler.toml é…ç½®
```toml
name = "simple-blog-api"
main = "simple_blog_worker.js"
compatibility_date = "2024-08-13"

# è‡ªå®šä¹‰åŸŸåè·¯ç”±
[[routes]]
pattern = "huaman-lou.top/*"
zone_name = "huaman-lou.top"

# æˆ–è€…é…ç½®å­åŸŸå
[[routes]]
pattern = "api.huaman-lou.top/*"
zone_name = "huaman-lou.top"
```

#### æ–¹æ³• 3ï¼šé€šè¿‡ Wrangler å‘½ä»¤è¡Œ
```bash
# æ·»åŠ è·¯ç”±åˆ°ç°æœ‰åŸŸå
wrangler route put 'huaman-lou.top/*' simple-blog-api

# æˆ–è€…æ·»åŠ å­åŸŸåè·¯ç”±
wrangler route put 'api.huaman-lou.top/*' simple-blog-api
```

### æ­¥éª¤ 3ï¼šDNS é…ç½®

#### å¦‚æœä½¿ç”¨ Cloudflare DNSï¼š
```
ç±»å‹: CNAME
åç§°: @ (æˆ– api)
ç›®æ ‡: simple-blog-api.gudaobaiyun12.workers.dev
TTL: è‡ªåŠ¨
ä»£ç†çŠ¶æ€: å·²ä»£ç† (æ©™è‰²äº‘æœµ)
```

#### å¦‚æœä½¿ç”¨å…¶ä»– DNS æä¾›å•†ï¼š
```
ç±»å‹: CNAME
åç§°: @ (æ ¹åŸŸå) æˆ– api (å­åŸŸå)
å€¼: simple-blog-api.gudaobaiyun12.workers.dev
TTL: 300 (5åˆ†é’Ÿ)
```

### æ­¥éª¤ 4ï¼šSSL/TLS é…ç½®

åœ¨ Cloudflare Dashboard ä¸­ï¼š
1. è½¬åˆ° "SSL/TLS" â†’ "æ¦‚è¿°"
2. è®¾ç½®åŠ å¯†æ¨¡å¼ä¸º "å®Œå…¨" æˆ– "å®Œå…¨(ä¸¥æ ¼)"
3. ç¡®ä¿ "å§‹ç»ˆä½¿ç”¨ HTTPS" å·²å¯ç”¨

### éªŒè¯é…ç½®

```bash
# æ£€æŸ¥ DNS è§£æ
nslookup huaman-lou.top

# æµ‹è¯• HTTP è®¿é—®
curl http://huaman-lou.top/api/posts

# æµ‹è¯• HTTPS è®¿é—®
curl https://huaman-lou.top/api/posts

# æ£€æŸ¥ SSL è¯ä¹¦
curl -I https://huaman-lou.top
```

## ğŸš€ å¿«é€Ÿé…ç½®è„šæœ¬

æˆ‘å°†ä¸ºä½ åˆ›å»ºä¸€ä¸ªè‡ªåŠ¨åŒ–é…ç½®è„šæœ¬æ¥ç®€åŒ–è¿™ä¸ªè¿‡ç¨‹ã€‚

## ğŸ“ é…ç½®åéœ€è¦æ›´æ–°çš„æ–‡ä»¶

### 1. æ›´æ–° HTML ç•Œé¢
ä¿®æ”¹ `blog-viewer.html` å’Œ `public-blog-viewer.html` ä¸­çš„ API_BASEï¼š
```javascript
const API_BASE = 'https://huaman-lou.top/api';
// æˆ–è€…
const API_BASE = 'https://api.huaman-lou.top/api';
```

### 2. æ›´æ–°æ–‡æ¡£
æ›´æ–°æ‰€æœ‰æ–‡æ¡£ä¸­çš„ API åœ°å€å¼•ç”¨ã€‚

### 3. æ›´æ–°æµ‹è¯•è„šæœ¬
ä¿®æ”¹æµ‹è¯•è„šæœ¬ä¸­çš„é»˜è®¤ URLã€‚

## âš ï¸ æ³¨æ„äº‹é¡¹

1. **DNS ä¼ æ’­æ—¶é—´**ï¼šDNS æ›´æ”¹å¯èƒ½éœ€è¦ 24-48 å°æ—¶å®Œå…¨ä¼ æ’­
2. **SSL è¯ä¹¦**ï¼šCloudflare ä¼šè‡ªåŠ¨ä¸ºä½ çš„åŸŸåæä¾› SSL è¯ä¹¦
3. **æ ¹åŸŸå vs å­åŸŸå**ï¼šå»ºè®®ä½¿ç”¨ `api.huaman-lou.top` ç”¨äº API
4. **ç¼“å­˜**ï¼šé…ç½®åå¯èƒ½éœ€è¦æ¸…é™¤æµè§ˆå™¨ç¼“å­˜æ‰èƒ½çœ‹åˆ°æ›´æ”¹

## ğŸ”§ æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜
1. **404 é”™è¯¯**ï¼šæ£€æŸ¥è·¯ç”±é…ç½®æ˜¯å¦æ­£ç¡®
2. **SSL é”™è¯¯**ï¼šç­‰å¾… SSL è¯ä¹¦ç”Ÿæˆï¼ˆé€šå¸¸å‡ åˆ†é’Ÿï¼‰
3. **DNS è§£æå¤±è´¥**ï¼šæ£€æŸ¥ DNS è®°å½•æ˜¯å¦æ­£ç¡®é…ç½®
4. **CORS é”™è¯¯**ï¼šç¡®ä¿ Worker ä¸­çš„ CORS é…ç½®åŒ…å«æ–°åŸŸå

### è°ƒè¯•å‘½ä»¤
```bash
# æ£€æŸ¥ Worker è·¯ç”±
wrangler route list

# æŸ¥çœ‹ Worker è¯¦æƒ…
wrangler deployment list

# æµ‹è¯• API ç«¯ç‚¹
curl -v https://huaman-lou.top/api/posts
```
