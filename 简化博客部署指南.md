# 简化博客部署指南

## 快速开始

### 1. 准备环境
```bash
# 安装 Wrangler CLI
npm install -g @cloudflare/wrangler

# 登录 Cloudflare
npx wrangler login
```

### 2. 创建并配置数据库
```bash
# 创建 D1 数据库
npx wrangler d1 create simple-blog-db

# 复制返回的数据库 ID 到 wrangler.toml 文件中
```

### 3. 初始化数据库
```bash
# 本地开发环境
npx wrangler d1 execute simple-blog-db --file=./simple_blog_database.sql --local

# 生产环境
npx wrangler d1 execute simple-blog-db --file=./simple_blog_database.sql --remote
```

### 4. 本地开发
```bash
# 启动本地开发服务器
npx wrangler dev simple_blog_worker.js --local --persist
```

### 5. 部署到生产环境
```bash
# 部署 Worker
npx wrangler deploy simple_blog_worker.js
```

## API 端点

| 方法 | 端点 | 描述 |
|------|------|------|
| GET | `/api/posts` | 获取帖子列表 |
| GET | `/api/posts/:id` | 获取单个帖子 |
| POST | `/api/posts` | 创建新帖子 |
| PUT | `/api/posts/:id` | 更新帖子 |
| DELETE | `/api/posts/:id` | 删除帖子 |

## 查询参数

**GET /api/posts**
- `page`: 页码 (默认 1)
- `limit`: 每页数量 (默认 10)
- `status`: 帖子状态 (published/draft/archived)

## 示例请求

### 创建帖子
```javascript
const response = await fetch('/api/posts', {
  method: 'POST',
  headers: { 'Content-Type': 'application/json' },
  body: JSON.stringify({
    title: '新博客文章',
    content: '文章内容...',
    author: '作者名称',
    slug: 'new-blog-post',
    status: 'published',
    excerpt: '文章摘要'
  })
});
```

### 获取帖子
```javascript
const response = await fetch('/api/posts?page=1&limit=5');
const data = await response.json();
```